{"ast":null,"code":"import React,{useState,useCallback,useEffect}from'react';import{useDropzone}from'react-dropzone';import axios from'axios';import{saveAs}from'file-saver';import LoadingSpinner from'./LoadingSpinner';import FileInfo from'./FileInfo';import uploadIcon from'../uploadIcon.svg';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const apiUrl=process.env.REACT_APP_API_URL;const websocketUrl=process.env.REACT_APP_WEBSOCKET_URL;const DragAndDropUpload=()=>{const[tags,setTags]=useState([]);const[transcript,setTranscript]=useState('');const[isUploading,setIsUploading]=useState(false);const[uploadProgress,setUploadProgress]=useState(0);const[fileInfo,setFileInfo]=useState(null);const[ws,setWs]=useState(null);const[error,setError]=useState(null);useEffect(()=>{return()=>{if(ws){ws.close();}};},[ws]);const onDrop=useCallback((acceptedFiles,rejectedFiles)=>{setUploadProgress(0);setTags([]);setTranscript('');setFileInfo(null);if(rejectedFiles.length>0){const errorCode=rejectedFiles[0].errors[0].code;let errorMsg;if(errorCode==='file-too-large'){errorMsg=\"The file is too large. Please upload a video file smaller than 50MB.\";}else if(errorCode==='file-invalid-type'){errorMsg=\"Invalid file type. Please upload a valid video file.\";}else{errorMsg=\"Error: \".concat(rejectedFiles[0].errors[0].message);}setError(errorMsg);return;}if(ws){ws.close();setWs(null);}const file=acceptedFiles[0];setFileInfo({name:file.name,size:(file.size/1024/1024).toFixed(2)});const formData=new FormData();formData.append('video',file);setIsUploading(true);setError(null);axios.post(\"\".concat(apiUrl,\"/api/upload\"),formData,{headers:{'Content-Type':'multipart/form-data'}}).then(response=>{const ws=new WebSocket(\"\".concat(websocketUrl));setWs(ws);setUploadProgress(20);ws.onopen=()=>{ws.send(JSON.stringify({action:'process',filePath:response.data.filePath}));};ws.onmessage=event=>{const data=JSON.parse(event.data);if(data.progress){setUploadProgress(data.progress);}if(data.transcript&&data.tags){setTranscript(data.transcript);setTags(data.tags);setIsUploading(false);}if(data.error){console.error(data.error);setIsUploading(false);}};ws.onclose=()=>{setWs(null);};}).catch(error=>{console.error('Error uploading the file:',error);setIsUploading(false);});},[ws]);const{getRootProps,getInputProps,isDragActive,open}=useDropzone({onDrop,noClick:true,noKeyboard:true,disabled:isUploading,accept:{'video/*':[]},maxFiles:1,maxSize:50*1024*1024});const getHighlightedText=(text,tags)=>{if(!tags.length)return/*#__PURE__*/_jsx(\"span\",{children:text});const sortedTags=tags.sort((a,b)=>b.text.length-a.text.length);let parts=[text];let uniqueId=0;sortedTags.forEach(tag=>{const newParts=[];parts.forEach(part=>{if(typeof part==='string'){const regex=new RegExp(\"(\".concat(tag.text,\")\"),'gi');const splitParts=part.split(regex);splitParts.forEach((splitPart,index)=>{if(regex.test(splitPart)){newParts.push(/*#__PURE__*/_jsx(\"span\",{className:\"px-1 py-1 bg-indigo-50\",children:splitPart},\"\".concat(splitPart,\"-\").concat(uniqueId++)));}else{newParts.push(splitPart);}});}else{newParts.push(part);}});parts=newParts;});return parts;};const formatTagsForCSV=(tags,fileName)=>{const tagMap=tags.reduce((acc,tag)=>{if(!acc[tag.category]){acc[tag.category]=[];}acc[tag.category].push(tag.text);return acc;},{});const categories=Object.keys(tagMap);const csvRows=['Filename,'+categories.join(',')];const row=[fileName];categories.forEach(category=>{row.push(\"\\\"\".concat(tagMap[category].join('|'),\"\\\"\"));});csvRows.push(row.join(','));return csvRows.join('\\n');};const downloadCSV=()=>{const csvData=formatTagsForCSV(tags,fileInfo.name);const blob=new Blob([csvData],{type:'text/csv;charset=utf-8;'});saveAs(blob,'tags.csv');};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center max-w-screen-md px-10 py-6 mx-auto md:border-gray-200 md:border md:border-solid md:rounded-md\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"self-start mb-1 text-xl font-bold\",children:\"Upload your Video\"}),/*#__PURE__*/_jsx(\"p\",{className:\"self-start mb-6 text-sm font-semibold text-gray-600\",children:\"Upload a video to generate metadata keywords based on its transcript.\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"mb-2 text-sm text-red-500\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center bg-gray-50 border-gray-400 border-2 rounded-md p-10 mb-6 w-full min-h-60 transition-colors duration-300 \".concat(isDragActive?'bg-indigo-100/50 border-indigo-400 border-solid':'border-gray-400 border-dashed',\" \").concat(isUploading?'opacity-50 cursor-not-allowed':''),...getRootProps(),children:[/*#__PURE__*/_jsx(\"input\",{...getInputProps(),disabled:isUploading}),isUploading?/*#__PURE__*/_jsx(LoadingSpinner,{}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 p-2 mb-4 bg-indigo-500 rounded-md\",children:/*#__PURE__*/_jsx(\"img\",{src:uploadIcon,alt:\"A white upload icon - a white arrow pointing up\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-lg text-center\",children:\"\".concat(isDragActive?'Drop to upload your file':'Drag a video file here to upload it')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Maximum file size 50MB\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"font-semibold text-indigo-600 hover:cursor-pointer transition-transform transform \".concat(isDragActive?'scale-0':'scale-100'),onClick:open,children:\"Or choose your file\"})]})]}),fileInfo&&/*#__PURE__*/_jsx(FileInfo,{fileInfo:fileInfo,uploadProgress:uploadProgress}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col w-full\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-px bg-gray-200\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col mb-6 md:flex-row md:justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mt-6 mb-1 text-sm font-bold uppercase\",children:\"Keywords:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"flex flex-wrap mb-6\",children:tags.map((tag,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col px-3 py-1 mt-2 mr-2 rounded-md bg-indigo-50\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-normal text-indigo-600 uppercase\",children:tag.category}),/*#__PURE__*/_jsx(\"li\",{className:\"inline-block font-semibold\",children:tag.text})]},index))})]}),/*#__PURE__*/_jsx(\"button\",{onClick:downloadCSV,disabled:!fileInfo,className:\"px-4 py-2 text-white bg-indigo-600 rounded-md w-fit md:self-center\",children:\"Download CSV\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-px bg-gray-200\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-6 mb-1 text-sm font-bold uppercase\",children:\"Transcript:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 text-sm/7\",children:getHighlightedText(transcript,tags)})]})]});};export default DragAndDropUpload;","map":{"version":3,"names":["React","useState","useCallback","useEffect","useDropzone","axios","saveAs","LoadingSpinner","FileInfo","uploadIcon","jsx","_jsx","jsxs","_jsxs","apiUrl","process","env","REACT_APP_API_URL","websocketUrl","REACT_APP_WEBSOCKET_URL","DragAndDropUpload","tags","setTags","transcript","setTranscript","isUploading","setIsUploading","uploadProgress","setUploadProgress","fileInfo","setFileInfo","ws","setWs","error","setError","close","onDrop","acceptedFiles","rejectedFiles","length","errorCode","errors","code","errorMsg","concat","message","file","name","size","toFixed","formData","FormData","append","post","headers","then","response","WebSocket","onopen","send","JSON","stringify","action","filePath","data","onmessage","event","parse","progress","console","onclose","catch","getRootProps","getInputProps","isDragActive","open","noClick","noKeyboard","disabled","accept","maxFiles","maxSize","getHighlightedText","text","children","sortedTags","sort","a","b","parts","uniqueId","forEach","tag","newParts","part","regex","RegExp","splitParts","split","splitPart","index","test","push","className","formatTagsForCSV","fileName","tagMap","reduce","acc","category","categories","Object","keys","csvRows","join","row","downloadCSV","csvData","blob","Blob","type","src","alt","onClick","map"],"sources":["/Users/brittanycallahan/Documents/Projects/video-metadata-generator/frontend/src/components/DragAndDropUpload.jsx"],"sourcesContent":["import React, { useState, useCallback, useEffect } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport axios from 'axios';\nimport { saveAs } from 'file-saver';\nimport LoadingSpinner from './LoadingSpinner';\nimport FileInfo from './FileInfo';\nimport uploadIcon from '../uploadIcon.svg';\nconst apiUrl = process.env.REACT_APP_API_URL;\nconst websocketUrl = process.env.REACT_APP_WEBSOCKET_URL;\n\nconst DragAndDropUpload = () => {\n  const [tags, setTags] = useState([]);\n  const [transcript, setTranscript] = useState('');\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [fileInfo, setFileInfo] = useState(null);\n  const [ws, setWs] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    return () => {\n      if (ws) {\n        ws.close();\n      }\n    };\n  }, [ws]);\n\n  const onDrop = useCallback((acceptedFiles, rejectedFiles) => {\n    setUploadProgress(0);\n    setTags([]);\n    setTranscript('');\n    setFileInfo(null);\n\n    if (rejectedFiles.length > 0) {\n      const errorCode = rejectedFiles[0].errors[0].code;\n      let errorMsg;\n      if (errorCode === 'file-too-large') {\n        errorMsg = \"The file is too large. Please upload a video file smaller than 50MB.\";\n      } else if (errorCode === 'file-invalid-type') {\n        errorMsg = \"Invalid file type. Please upload a valid video file.\";\n      } else {\n        errorMsg = `Error: ${rejectedFiles[0].errors[0].message}`;\n      }\n      setError(errorMsg);\n      return;\n    }\n\n    if (ws) {\n      ws.close();\n      setWs(null);\n    }\n\n    const file = acceptedFiles[0];\n    setFileInfo({\n      name: file.name,\n      size: (file.size / 1024 / 1024).toFixed(2),\n    })\n\n    const formData = new FormData();\n    formData.append('video', file);\n\n    setIsUploading(true);\n    setError(null);\n\n    axios.post(`${apiUrl}/api/upload`, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n    })\n    .then(response => {\n      const ws = new WebSocket(`${websocketUrl}`);\n      setWs(ws);\n      setUploadProgress(20);\n\n      ws.onopen = () => {\n        ws.send(JSON.stringify({ action: 'process', filePath: response.data.filePath }));\n      }\n\n      ws.onmessage = (event) => {\n        const data = JSON.parse(event.data);\n        if (data.progress) {\n          setUploadProgress(data.progress);\n        }\n        if (data.transcript && data.tags) {\n          setTranscript(data.transcript);\n          setTags(data.tags);\n          setIsUploading(false);\n        }\n        if (data.error) {\n          console.error(data.error);\n          setIsUploading(false);\n        }\n      }\n\n      ws.onclose = () => {\n        setWs(null);\n      }\n    })\n    .catch(error => {\n      console.error('Error uploading the file:', error);\n      setIsUploading(false);\n    })\n  }, [ws]);\n\n  const { getRootProps, getInputProps, isDragActive, open } = useDropzone({ \n    onDrop,\n    noClick: true, \n    noKeyboard: true,\n    disabled: isUploading,\n    accept: {'video/*': []},\n    maxFiles: 1,\n    maxSize: 50 * 1024 * 1024\n  });\n\n  const getHighlightedText = (text, tags) => {\n    if (!tags.length) return <span>{text}</span>;\n\n    const sortedTags = tags.sort((a, b) => b.text.length - a.text.length);\n    let parts = [text];\n    let uniqueId = 0\n\n    sortedTags.forEach(tag => {\n      const newParts = [];\n      parts.forEach(part => {\n        if (typeof part === 'string') {\n          const regex = new RegExp(`(${tag.text})`, 'gi');\n          const splitParts = part.split(regex);\n          splitParts.forEach((splitPart, index) => {\n            if (regex.test(splitPart)) {\n              newParts.push(<span className='px-1 py-1 bg-indigo-50' key={`${splitPart}-${uniqueId++}`}>{splitPart}</span>);\n            } else {\n              newParts.push(splitPart);\n            }\n          });\n        } else {\n          newParts.push(part);\n        }\n      });\n      parts = newParts;\n    });\n\n    return parts;\n  };\n\n  const formatTagsForCSV = (tags, fileName) => {\n    const tagMap = tags.reduce((acc, tag) => {\n      if (!acc[tag.category]) {\n        acc[tag.category] = [];\n      }\n      acc[tag.category].push(tag.text);\n      return acc;\n    }, {});\n\n    const categories = Object.keys(tagMap);\n    const csvRows = ['Filename,' + categories.join(',')];\n    const row = [fileName];\n\n    categories.forEach(category => {\n      row.push(`\"${tagMap[category].join('|')}\"`);\n    });\n\n    csvRows.push(row.join(','));\n    return csvRows.join('\\n');\n  };\n\n  const downloadCSV = () => {\n    const csvData = formatTagsForCSV(tags, fileInfo.name);\n    const blob = new Blob([csvData], { type: 'text/csv;charset=utf-8;' });\n    saveAs(blob, 'tags.csv');\n  };\n\n  return (\n    <div className='flex flex-col items-center max-w-screen-md px-10 py-6 mx-auto md:border-gray-200 md:border md:border-solid md:rounded-md'>\n      <h2 className='self-start mb-1 text-xl font-bold'>Upload your Video</h2>\n      <p className='self-start mb-6 text-sm font-semibold text-gray-600'>Upload a video to generate metadata keywords based on its transcript.</p>\n      {error && <p className=\"mb-2 text-sm text-red-500\">{error}</p>}\n      <div \n        className={`flex flex-col items-center justify-center bg-gray-50 border-gray-400 border-2 rounded-md p-10 mb-6 w-full min-h-60 transition-colors duration-300 ${isDragActive ? 'bg-indigo-100/50 border-indigo-400 border-solid' : 'border-gray-400 border-dashed'} ${isUploading ? 'opacity-50 cursor-not-allowed' : ''}`} \n        {...getRootProps()}\n      >\n        <input {...getInputProps()} disabled={isUploading} />\n        {\n          isUploading ? (\n            <LoadingSpinner/>\n          ) : (\n            <div className='flex flex-col items-center'>\n              <div className='w-12 p-2 mb-4 bg-indigo-500 rounded-md'>\n                <img src={uploadIcon} alt=\"A white upload icon - a white arrow pointing up\" />\n              </div>\n              <p className={`font-bold text-lg text-center`}>\n                {`${isDragActive ? 'Drop to upload your file' : 'Drag a video file here to upload it'}`}\n              </p>\n              <p className='text-gray-600'>Maximum file size 50MB</p>\n              <button type='button'className={`font-semibold text-indigo-600 hover:cursor-pointer transition-transform transform ${isDragActive ? 'scale-0' : 'scale-100'}`} onClick={open}>Or choose your file</button>\n            </div>\n          )\n        }\n      </div>\n      {fileInfo && <FileInfo fileInfo={fileInfo} uploadProgress={uploadProgress} />}\n      <div className='flex flex-col w-full'>\n        <div className='w-full h-px bg-gray-200'></div>\n        <div className='flex flex-col mb-6 md:flex-row md:justify-between'>\n          <div className='flex flex-col'>\n            <h3 className='mt-6 mb-1 text-sm font-bold uppercase'>Keywords:</h3>\n            <ul className='flex flex-wrap mb-6'>\n              {tags.map((tag, index) => (\n                <div key={index} className='flex flex-col px-3 py-1 mt-2 mr-2 rounded-md bg-indigo-50'>\n                  <span className='text-xs font-normal text-indigo-600 uppercase'>{tag.category}</span>\n                  <li className='inline-block font-semibold'>{tag.text}</li>\n                </div>\n              ))}\n            </ul>\n          </div>\n          <button onClick={downloadCSV} disabled={!fileInfo} className='px-4 py-2 text-white bg-indigo-600 rounded-md w-fit md:self-center'>Download CSV</button>\n        </div>\n        <div className='w-full h-px bg-gray-200'></div>\n        <h3 className='mt-6 mb-1 text-sm font-bold uppercase'>Transcript:</h3>\n        <div className='mb-6 text-sm/7'>{getHighlightedText(transcript, tags)}</div>\n      </div>\n    </div>\n  );\n};\n\nexport default DragAndDropUpload;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}